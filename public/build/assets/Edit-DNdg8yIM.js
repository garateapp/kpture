import{v,r as b,j as e,$ as w,Y as g}from"./app-Be8ghtRb.js";import{A as N}from"./app-layout-BXVEw3EX.js";import{H as y}from"./heading-small-pb2CvvlP.js";import{I as o}from"./input-Co6CCOt6.js";import{B as c}from"./button-D1N9RrD0.js";import{L as l}from"./label-DPNJkhla.js";import{S as C,a as _,b as S,c as E,d as F}from"./select-B4H269ix.js";import"./index-wGWY3QV4.js";import"./index-BQmSkEsW.js";import"./index-CCmhZsir.js";import"./index-Bvxqhwof.js";import"./app-logo-icon-Dxd9VO9-.js";import"./index-C7CVg9dv.js";const A=r=>[{title:"Gestión de Usuarios",href:"/users"},{title:`Editar: ${r}`,href:"#"}];function G({user:r,estados:n,allRoles:p}){var m;const{data:i,setData:t,put:u,processing:x,errors:a}=v({name:r.name,email:r.email,password:"",password_confirmation:"",estado_id:r.estado_id,roles:r.roles.map(s=>s.id)});b.useEffect(()=>{t(s=>({...s,password:"",password_confirmation:""}))},[r.id,t]);const h=s=>{s.preventDefault(),u(route("users.update",r.id))},f=s=>{const j=Array.from(s.target.options).filter(d=>d.selected).map(d=>parseInt(d.value));t("roles",j)};return e.jsxs(N,{breadcrumbs:A(r.name),children:[e.jsx(w,{title:`Editar Usuario: ${r.name}`}),e.jsx(y,{title:`Editar Usuario: ${r.name}`,description:"Actualiza la información y los roles del usuario."}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Nombre"}),e.jsx(o,{id:"name",type:"text",name:"name",value:i.name,className:"w-full",autoComplete:"name",onChange:s=>t("name",s.target.value),required:!0}),a.name&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.name})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",name:"email",value:i.email,className:"w-full",autoComplete:"email",onChange:s=>t("email",s.target.value),required:!0}),a.email&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.email})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(l,{htmlFor:"password",children:"Contraseña (dejar en blanco para no cambiar)"}),e.jsx(o,{id:"password",type:"password",name:"password",value:i.password,className:"w-full",autoComplete:"new-password",onChange:s=>t("password",s.target.value)}),a.password&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.password})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(l,{htmlFor:"password_confirmation",children:"Confirmar Contraseña"}),e.jsx(o,{id:"password_confirmation",type:"password",name:"password_confirmation",value:i.password_confirmation,className:"w-full",autoComplete:"new-password",onChange:s=>t("password_confirmation",s.target.value)}),a.password_confirmation&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.password_confirmation})]}),n&&n.length>0&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(l,{htmlFor:"estado_id",children:"Estado"}),e.jsxs(C,{onValueChange:s=>t("estado_id",parseInt(s)),value:((m=i.estado_id)==null?void 0:m.toString())||"",children:[e.jsx(_,{className:"w-full",children:e.jsx(S,{placeholder:"Selecciona un estado"})}),e.jsx(E,{children:n.map(s=>e.jsx(F,{value:s.id.toString(),children:s.nombre},s.id))})]}),a.estado_id&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.estado_id})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx(l,{htmlFor:"roles",children:"Roles"}),e.jsx("select",{id:"roles",name:"roles[]",multiple:!0,className:"block w-full rounded-md border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:i.roles.map(String),onChange:f,children:p.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))}),a.roles&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.roles}),a["roles.0"]&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:"Error en la selección de roles."})]}),e.jsxs("div",{className:"flex items-center justify-end mt-6",children:[e.jsx(g,{href:route("users.index"),className:"mr-4",children:e.jsx(c,{variant:"outline",children:"Cancelar"})}),e.jsx(c,{type:"submit",disabled:x,children:"Actualizar Usuario"})]})]})})]})}export{G as default};
