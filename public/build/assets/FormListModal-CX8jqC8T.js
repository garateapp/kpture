import{a as D,r as l,j as a}from"./app-Be8ghtRb.js";import{D as F,a as R,b as X,c as $,d as q}from"./dialog-kbqxv5yS.js";import{I as x}from"./input-Co6CCOt6.js";import{L as g}from"./label-DPNJkhla.js";import{B as C}from"./button-D1N9RrD0.js";import{t as S}from"./index-CuSu5bUe.js";import{L as I}from"./loader-circle-Birh5WQz.js";import"./index-wGWY3QV4.js";import"./index-BQmSkEsW.js";import"./index-CCmhZsir.js";const o=D.create();o.interceptors.request.use(e=>{var t;e.headers&&e.headers["X-Inertia"]&&delete e.headers["X-Inertia"],e.headers&&!e.headers["X-Requested-With"]&&(e.headers["X-Requested-With"]="XMLHttpRequest");const s=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");return s&&e.headers&&!e.headers["X-CSRF-TOKEN"]&&(e.headers["X-CSRF-TOKEN"]=s),e},e=>Promise.reject(e));const c="/form-lists",f={getAll:async()=>{try{const e=await o.get(c);return{data:e.data,status:e.status}}catch{}},create:async e=>{try{const s=await o.post(c,e);return{data:s.data,status:s.status}}catch{}},update:async(e,s)=>{try{const t=await o.put(`${c}/${e}`,s);return{data:t.data,status:t.status}}catch{}},remove:async e=>{try{return{status:(await o.delete(`${c}/${e}`)).status}}catch{}}},W=({isOpen:e,onClose:s,formListToEdit:t})=>{const[j,u]=l.useState(""),[v,m]=l.useState(""),[N,p]=l.useState(""),[i,b]=l.useState(!1),[r,h]=l.useState({});l.useEffect(()=>{e&&(t?(u(t.entidad),m(t.codigo),p(t.valor)):(u(""),m(""),p("")),h({}))},[e,t]);const w=async d=>{d.preventDefault(),b(!0),h({});const y={entidad:j,codigo:v,valor:N};let n;t&&t.id?n=await f.update(t.id,y):n=await f.create(y),n.data?(S({title:"Éxito",description:`Entrada ${t?"actualizada":"creada"} correctamente.`}),s()):(n.errors&&h(n.errors),S({title:"Error",description:n.message||`No se pudo ${t?"actualizar":"crear"} la entrada.`,variant:"destructive"})),b(!1)};return a.jsx(F,{open:e,onOpenChange:s,children:a.jsxs(R,{className:"sm:max-w-[425px]",children:[a.jsxs(X,{children:[a.jsx($,{children:t?"Editar Entrada de Lista":"Nueva Entrada de Lista"}),a.jsx(q,{children:t?"Modifica los campos de la entrada de lista.":"Añade una nueva entrada a la lista de formulario."})]}),a.jsxs("form",{onSubmit:w,className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(g,{htmlFor:"entidad",className:"text-right",children:"Entidad"}),a.jsx(x,{id:"entidad",value:j,onChange:d=>u(d.target.value),className:r.entidad?"border-red-500":"",disabled:i}),r.entidad&&a.jsx("p",{className:"col-span-4 text-red-500 text-sm",children:r.entidad[0]})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(g,{htmlFor:"codigo",className:"text-right",children:"Código"}),a.jsx(x,{id:"codigo",value:v,onChange:d=>m(d.target.value),className:r.codigo?"border-red-500":"",disabled:i}),r.codigo&&a.jsx("p",{className:"col-span-4 text-red-500 text-sm",children:r.codigo[0]})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(g,{htmlFor:"valor",className:"text-right",children:"Valor"}),a.jsx(x,{id:"valor",value:N,onChange:d=>p(d.target.value),className:r.valor?"border-red-500":"",disabled:i}),r.valor&&a.jsx("p",{className:"col-span-4 text-red-500 text-sm",children:r.valor[0]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(C,{type:"button",variant:"outline",onClick:s,disabled:i,children:"Cancelar"}),a.jsxs(C,{type:"submit",disabled:i,children:[i&&a.jsx(I,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Guardar Cambios":"Crear Entrada"]})]})]})]})})};export{W as default};
