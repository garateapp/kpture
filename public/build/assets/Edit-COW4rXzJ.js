import{v as f,j as e,$ as h,Y as b}from"./app-Be8ghtRb.js";import{A as j}from"./app-layout-BXVEw3EX.js";import{H as g}from"./heading-small-pb2CvvlP.js";import{I as v}from"./input-Co6CCOt6.js";import{B as n}from"./button-D1N9RrD0.js";import{L as m}from"./label-DPNJkhla.js";import"./index-wGWY3QV4.js";import"./index-BQmSkEsW.js";import"./index-CCmhZsir.js";import"./index-Bvxqhwof.js";import"./app-logo-icon-Dxd9VO9-.js";const y=s=>[{title:"Gestión de Roles",href:"/roles"},{title:`Editar: ${s}`,href:"#"}];function z({role:s,allPermissions:l}){console.log("RoleEdit component rendered with role:",s),console.log("All permissions:",l);const{data:o,setData:a,put:d,processing:c,errors:i}=f({title:s.title||"",permissions:s.permissions.map(t=>t.id)}),p=t=>{t.preventDefault(),d(route("roles.update",s.id))},u=t=>{const x=Array.from(t.target.options).filter(r=>r.selected).map(r=>parseInt(r.value));a("permissions",x)};return e.jsxs(j,{breadcrumbs:y(s.title),children:[e.jsx(h,{title:`Editar Rol: ${s.title}`}),e.jsx(g,{title:`Editar Rol: ${s.title}`,description:"Actualiza la información y los permisos del rol."}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(m,{htmlFor:"title",children:"Título del Rol"}),e.jsx(v,{id:"title",type:"text",name:"title",value:o.title,className:"w-full",autoComplete:"title",onChange:t=>a("title",t.target.value),required:!0}),i.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.title})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx(m,{htmlFor:"permissions",children:"Permisos"}),e.jsx("select",{id:"permissions",name:"permissions[]",multiple:!0,className:"block w-full rounded-md border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:o.permissions.map(String),onChange:u,children:l.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))}),i.permissions&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.permissions}),i["permissions.0"]&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:"Error en la selección de permisos."})]}),e.jsxs("div",{className:"flex items-center justify-end mt-6",children:[e.jsx(b,{href:route("roles.index"),className:"mr-4",children:e.jsx(n,{variant:"outline",children:"Cancelar"})}),e.jsx(n,{type:"submit",disabled:c,children:"Actualizar Rol"})]})]})})]})}export{z as default};
